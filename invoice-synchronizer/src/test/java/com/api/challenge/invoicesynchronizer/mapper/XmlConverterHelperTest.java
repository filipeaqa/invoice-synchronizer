package com.api.challenge.invoicesynchronizer.mapper;

import com.api.challenge.invoicesynchronizer.mapper.xml.NFe;
import com.api.challenge.invoicesynchronizer.mapper.xml.NfeProc;
import org.junit.Assert;
import org.junit.Test;

import javax.xml.bind.JAXBException;

public class XmlConverterHelperTest {

    @Test(expected = JAXBException.class)
    public void shouldThrowException() throws JAXBException {
        NfeProc nfeProc = XmlConverterHelper.xmlToNfeProc("");
    }

    @Test
    public void shouldConvertXmlIntoNfeProc() throws JAXBException {
        String xmlNfeProc = "<nfeProc xmlns=\"http://www.portalfiscal.inf.br/nfe\" versao=\"3.10\"><NFe xmlns=\"http://www.portalfiscal.inf.br/nfe\"><infNFe xmlns=\"http://www.portalfiscal.inf.br/nfe\" Id=\"NFe35140330290824000104550010003715421390782397\" versao=\"3.10\"><ide><cUF>35</cUF><cNF>39078239</cNF><natOp>VENDA NO ESTADO ICMS-ST</natOp><indPag>1</indPag><mod>55</mod><serie>1</serie><nNF>371542</nNF><dhEmi>2014-03-12T19:04:00-03:00</dhEmi><tpNF>1</tpNF><idDest>1</idDest><cMunFG>3550506</cMunFG><tpImp>1</tpImp><tpEmis>1</tpEmis><cDV>7</cDV><tpAmb>1</tpAmb><finNFe>1</finNFe><indFinal>0</indFinal><indPres>9</indPres><procEmi>0</procEmi><verProc>1.0</verProc></ide><emit><CNPJ>30290824000104</CNPJ><xNome>Helena Eletronica</xNome><xFant>Esther e Helena Eletronica Ltda</xFant><enderEmit><xLgr>RUA INACIO ALVES BARCELOS</xLgr><nro>421</nro><xBairro>JAQUELINE</xBairro><cMun>3204906</cMun><xMun>SAO MATEUS</xMun><UF>ES</UF><CEP>29936235</CEP><cPais>1058</cPais><xPais>BRASIL</xPais><fone>2738458324</fone></enderEmit><IE>773874607</IE><CRT>3</CRT></emit><dest><CNPJ>97600213000196</CNPJ><xNome>Empresa</xNome><enderDest><xLgr>AVENIDA CARLOS BOTELHO</xLgr><nro>1869</nro><xBairro>CENTRO</xBairro><cMun>3548906</cMun><xMun>SAO CARLOS</xMun><UF>SP</UF><CEP>13560250</CEP><cPais>1058</cPais><xPais>BRASIL</xPais></enderDest><indIEDest>1</indIEDest><IE>637055555117</IE></dest><det nItem=\"1\"><prod><cProd>124214</cProd><cEAN/><xProd>Tampa Reservat&#243;rio Expans&#227;o   TC-3060/MF30</xProd><NCM>87089990</NCM><CFOP>5405</CFOP><uCom>PC</uCom><qCom>6</qCom><vUnCom>5.0300</vUnCom><vProd>30.18</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>6</qTrib><vUnTrib>5.0300</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS60><orig>0</orig><CST>60</CST></ICMS60></ICMS><PIS><PISNT><CST>04</CST></PISNT></PIS><COFINS><COFINSNT><CST>04</CST></COFINSNT></COFINS></imposto></det><det nItem=\"2\"><prod><cProd>445231</cProd><cEAN>7898233430663</cEAN><xProd>Cubo Roda Traseira            AL599A</xProd><NCM>87089990</NCM><CFOP>5405</CFOP><uCom>PC</uCom><qCom>2</qCom><vUnCom>52.0200</vUnCom><vProd>104.04</vProd><cEANTrib>7898233430663</cEANTrib><uTrib>PC</uTrib><qTrib>2</qTrib><vUnTrib>52.0200</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS60><orig>3</orig><CST>60</CST></ICMS60></ICMS><PIS><PISNT><CST>04</CST></PISNT></PIS><COFINS><COFINSNT><CST>04</CST></COFINSNT></COFINS></imposto></det><det nItem=\"4\"><prod><cProd>591033</cProd><cEAN>7899244206162</cEAN><xProd>Mangueira Combust&#237;vel         MLLUBT-7/D0378</xProd><NCM>59090000</NCM><CFOP>5405</CFOP><uCom>MT</uCom><qCom>25</qCom><vUnCom>2.0300</vUnCom><vProd>50.75</vProd><cEANTrib>7899244206162</cEANTrib><uTrib>MT</uTrib><qTrib>25</qTrib><vUnTrib>2.0300</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS60><orig>0</orig><CST>60</CST></ICMS60></ICMS><PIS><PISAliq><CST>01</CST><vBC>50.75</vBC><pPIS>0.65</pPIS><vPIS>0.33</vPIS></PISAliq></PIS><COFINS><COFINSAliq><CST>01</CST><vBC>50.75</vBC><pCOFINS>3.00</pCOFINS><vCOFINS>1.52</vCOFINS></COFINSAliq></COFINS></imposto></det><det nItem=\"5\"><prod><cProd>591041</cProd><cEAN>7899244206261</cEAN><xProd>Mangueira Combust&#237;vel         MLLUBT-9/D0382</xProd><NCM>59090000</NCM><CFOP>5405</CFOP><uCom>MT</uCom><qCom>25</qCom><vUnCom>2.9600</vUnCom><vProd>74.00</vProd><cEANTrib>7899244206261</cEANTrib><uTrib>MT</uTrib><qTrib>25</qTrib><vUnTrib>2.9600</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS60><orig>0</orig><CST>60</CST></ICMS60></ICMS><PIS><PISAliq><CST>01</CST><vBC>74.00</vBC><pPIS>0.65</pPIS><vPIS>0.48</vPIS></PISAliq></PIS><COFINS><COFINSAliq><CST>01</CST><vBC>74.00</vBC><pCOFINS>3.00</pCOFINS><vCOFINS>2.22</vCOFINS></COFINSAliq></COFINS></imposto></det><det nItem=\"3\"><prod><cProd>727709</cProd><cEAN/><xProd>Correia Multi V               6PK1220</xProd><NCM>40103100</NCM><CFOP>5405</CFOP><uCom>PC</uCom><qCom>4</qCom><vUnCom>26.7300</vUnCom><vProd>106.92</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>4</qTrib><vUnTrib>26.7300</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS60><orig>2</orig><CST>60</CST></ICMS60></ICMS><PIS><PISAliq><CST>01</CST><vBC>106.92</vBC><pPIS>0.65</pPIS><vPIS>0.69</vPIS></PISAliq></PIS><COFINS><COFINSAliq><CST>01</CST><vBC>106.92</vBC><pCOFINS>3.00</pCOFINS><vCOFINS>3.21</vCOFINS></COFINSAliq></COFINS></imposto></det><total><ICMSTot><vBC>0.00</vBC><vICMS>0.00</vICMS><vICMSDeson>0.00</vICMSDeson><vBCST>0.00</vBCST><vST>0.00</vST><vProd>365.89</vProd><vFrete>0.00</vFrete><vSeg>0.00</vSeg><vDesc>0</vDesc><vII>0</vII><vIPI>0.00</vIPI><vPIS>1.51</vPIS><vCOFINS>6.95</vCOFINS><vOutro>0.00</vOutro><vNF>365.89</vNF></ICMSTot></total><transp><modFrete>0</modFrete><transporta><CNPJ>06819428000147</CNPJ><xNome>Seamless Transportes E Turismo</xNome><IE>689045040877</IE><xEnder>RUA CEL MARCILIO FRANCO 800</xEnder><xMun>FRANCA</xMun><UF>SP</UF></transporta><vol><qVol>3</qVol><esp>SC</esp><pesoL>9.148</pesoL><pesoB>9.331</pesoB></vol></transp></infNFe><Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"><SignedInfo><CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/><SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/><Reference URI=\"#NFe35140330290824000104550010003715421390782397\"><Transforms><Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/><Transform Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/></Transforms><DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/><DigestValue>ddcfbc8c9661f583e1150f5712f27c1da2b6001c</DigestValue></Reference></SignedInfo><SignatureValue>lVLhv4Coc9ZDdi5fHavJWcBVLFzvX1vpI9brvgAN7m2YwurRF/jO18nN9apYf3678bc7oo/F5GPDLVKZ/vSgub/OicE/BtE/uLWVUowkB96M06XQqg+Ik6IKk0j5cRG5saYFAzMMNpZUFxxOwglbI/rFpoNv25jTVeqftR8uT10=</SignatureValue><KeyInfo><X509Data><X509Certificate>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</X509Certificate></X509Data></KeyInfo></Signature></NFe><protNFe versao=\"3.10\"><infProt Id=\"Id135140154348408\"><tpAmb>1</tpAmb><verAplic>SP_NFE_PL_008b</verAplic><chNFe>35140330290824000104550010003715421390782397</chNFe><dhRecbto>2014-03-12T19:07:42</dhRecbto><nProt>135140154348408</nProt><digVal>ddcfbc8c9661f583e1150f5712f27c1da2b6001c</digVal><cStat>100</cStat><xMotivo>Autorizado o uso da NF-e</xMotivo></infProt></protNFe></nfeProc>";
        NfeProc nfeProc = XmlConverterHelper.xmlToNfeProc(xmlNfeProc);
        Assert.assertEquals(Double.valueOf(365.89), nfeProc.getNFe().getInfNFe().getTotal().getICMSTot().getvNf());
    }

    @Test
    public void shouldConvertXmlIntoNfe() throws JAXBException {
        String xmlNfe = "<NFe xmlns=\"http://www.portalfiscal.inf.br/nfe\"><infNFe versao=\"3.10\" Id=\"NFe35110883932854000133550010000001141840787155\"><ide><cUF>35</cUF><cNF>84078715</cNF><natOp>TRANSFERENCIA</natOp><indPag>2</indPag><mod>55</mod><serie>1</serie><nNF>114</nNF><dhEmi>2011-08-29T14:07:23-02:00</dhEmi><dhSaiEnt>2011-08-29T14:07:23-02:00</dhSaiEnt><tpNF>1</tpNF><idDest>2</idDest><cMunFG>3550308</cMunFG><tpImp>1</tpImp><tpEmis>1</tpEmis><cDV>5</cDV><tpAmb>1</tpAmb><finNFe>1</finNFe><indFinal>0</indFinal><indPres>1</indPres><procEmi>0</procEmi><verProc>3.10.74</verProc></ide><emit><CNPJ>83932854000133</CNPJ><xNome>Contabil ME</xNome><xFant>Henrique e Roberto Contabil ME</xFant><enderEmit><xLgr>RUA ROUXINOL</xLgr><nro>310</nro><xBairro>JARDIM RASSLEM</xBairro><cMun>5003702</cMun><xMun>DOURADOS</xMun><UF>MS</UF><CEP>79813250</CEP><cPais>1058</cPais><xPais>BRASIL</xPais><fone>6737035344</fone></enderEmit><IE>288354869</IE><IM>67993</IM><CNAE>1412601</CNAE><CRT>3</CRT></emit><dest><CNPJ>97600213000196</CNPJ><xNome>Empresa</xNome><enderDest><xLgr>AVENIDA CARLOS BOTELHO</xLgr><nro>1869</nro><xCpl>KM 111 CAIXA POSTAL 123</xCpl><xBairro>CENTRO</xBairro><cMun>3548906</cMun><xMun>SAO CARLOS</xMun><UF>SP</UF><CEP>13560250</CEP><cPais>1058</cPais><xPais>BRASIL</xPais><fone>1635095555</fone></enderDest><indIEDest>1</indIEDest><IE>637055555117</IE></dest><entrega><CNPJ>63967772000621</CNPJ><xLgr>RUA COMENDADOR ARAUJO</xLgr><nro>000732</nro><xCpl>PL4 LJ11</xCpl><xBairro>CENTRO</xBairro><cMun>4106902</cMun><xMun>CURITIBA</xMun><UF>PR</UF></entrega><det nItem=\"1\"><prod><cProd>120110088</cProd><cEAN/><xProd>BL1016 BOLSA ARRAIA</xProd><NCM>42022100</NCM><CFOP>6152</CFOP><uCom>UN</uCom><qCom>1.0000</qCom><vUnCom>1619.0000</vUnCom><vProd>1619.00</vProd><cEANTrib/><uTrib>UN</uTrib><qTrib>1.0000</qTrib><vUnTrib>1619.0000</vUnTrib><vDesc>53773.20</vDesc><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPITrib><CST>50</CST><vBC>1619.00</vBC><pIPI>10.00</pIPI><vIPI>161.90</vIPI></IPITrib></IPI><PIS><PISOutr><CST>49</CST><vBC>1619.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>1619.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"2\"><prod><cProd>120110101</cProd><cEAN/><xProd>BL1020 BOLSA NEW SOFT/ARRAIA</xProd><NCM>42022100</NCM><CFOP>6152</CFOP><uCom>UN</uCom><qCom>1.0000</qCom><vUnCom>2888.0000</vUnCom><vProd>2888.00</vProd><cEANTrib/><uTrib>UN</uTrib><qTrib>1.0000</qTrib><vUnTrib>2888.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPITrib><CST>50</CST><vBC>2888.00</vBC><pIPI>10.00</pIPI><vIPI>288.80</vIPI></IPITrib></IPI><PIS><PISOutr><CST>49</CST><vBC>2888.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>2888.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"3\"><prod><cProd>120110122</cProd><cEAN/><xProd>NSGUAD BOLSA LINHO RUSTICO</xProd><NCM>42022100</NCM><CFOP>6152</CFOP><uCom>UN</uCom><qCom>3.0000</qCom><vUnCom>2195.0000</vUnCom><vProd>6585.00</vProd><cEANTrib/><uTrib>UN</uTrib><qTrib>3.0000</qTrib><vUnTrib>2195.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPITrib><CST>50</CST><vBC>6585.00</vBC><pIPI>10.00</pIPI><vIPI>658.50</vIPI></IPITrib></IPI><PIS><PISOutr><CST>49</CST><vBC>6585.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>6585.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"4\"><prod><cProd>120110125</cProd><cEAN/><xProd>LYON BOLSA NEW SOFT/SUEDE</xProd><NCM>42022100</NCM><CFOP>6152</CFOP><uCom>UN</uCom><qCom>1.0000</qCom><vUnCom>2420.0000</vUnCom><vProd>2420.00</vProd><cEANTrib/><uTrib>UN</uTrib><qTrib>1.0000</qTrib><vUnTrib>2420.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPITrib><CST>50</CST><vBC>2420.00</vBC><pIPI>10.00</pIPI><vIPI>242.00</vIPI></IPITrib></IPI><PIS><PISOutr><CST>49</CST><vBC>2420.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>2420.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"5\"><prod><cProd>120110998</cProd><cEAN/><xProd>BL998 BOLSA VERNIZ CRAQUELE</xProd><NCM>42022100</NCM><CFOP>6152</CFOP><uCom>UN</uCom><qCom>3.0000</qCom><vUnCom>1967.3000</vUnCom><vProd>5901.90</vProd><cEANTrib/><uTrib>UN</uTrib><qTrib>3.0000</qTrib><vUnTrib>1967.3000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPITrib><CST>50</CST><vBC>5901.90</vBC><pIPI>10.00</pIPI><vIPI>590.19</vIPI></IPITrib></IPI><PIS><PISOutr><CST>49</CST><vBC>5901.90</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>5901.90</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"6\"><prod><cProd>120111998</cProd><cEAN/><xProd>BL998 BOLSA MINI CARRIS/NEW SOFT VEGETAL</xProd><NCM>42022100</NCM><CFOP>6152</CFOP><uCom>UN</uCom><qCom>1.0000</qCom><vUnCom>1967.3000</vUnCom><vProd>1967.30</vProd><cEANTrib/><uTrib>UN</uTrib><qTrib>1.0000</qTrib><vUnTrib>1967.3000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPITrib><CST>50</CST><vBC>1967.30</vBC><pIPI>10.00</pIPI><vIPI>196.73</vIPI></IPITrib></IPI><PIS><PISOutr><CST>49</CST><vBC>1967.30</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>1967.30</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"7\"><prod><cProd>120180122</cProd><cEAN/><xProd>80122 TOP DE SUPLEX</xProd><NCM>62064000</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>4.0000</qCom><vUnCom>215.0000</vUnCom><vProd>860.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>4.0000</qTrib><vUnTrib>215.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>860.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>860.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"8\"><prod><cProd>120180204</cProd><cEAN/><xProd>80204 SAIA LP C/PREGAS</xProd><NCM>62045100</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>3.0000</qCom><vUnCom>746.0000</vUnCom><vProd>2238.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>3.0000</qTrib><vUnTrib>746.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>2238.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>2238.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"9\"><prod><cProd>120180308</cProd><cEAN/><xProd>80308 VEST.LINHO ASSIM</xProd><NCM>62044200</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>3.0000</qCom><vUnCom>791.0000</vUnCom><vProd>2373.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>3.0000</qTrib><vUnTrib>791.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>2373.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>2373.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"10\"><prod><cProd>120180309</cProd><cEAN/><xProd>80309 VEST.RETO GRAVATARIA</xProd><NCM>62044200</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>1.0000</qCom><vUnCom>548.0000</vUnCom><vProd>548.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>1.0000</qTrib><vUnTrib>548.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>548.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>548.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"11\"><prod><cProd>120180404</cProd><cEAN/><xProd>80404 CALCA CAPRI</xProd><NCM>62046900</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>8.0000</qCom><vUnCom>854.0000</vUnCom><vProd>6832.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>8.0000</qTrib><vUnTrib>854.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>6832.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>6832.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"12\"><prod><cProd>120180417</cProd><cEAN/><xProd>80417 LEGING SUPLEX</xProd><NCM>62046300</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>5.0000</qCom><vUnCom>332.0000</vUnCom><vProd>1660.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>5.0000</qTrib><vUnTrib>332.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>1660.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>1660.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"13\"><prod><cProd>120180604</cProd><cEAN/><xProd>80604 BLAZER ORIGAMI</xProd><NCM>62043100</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>5.0000</qCom><vUnCom>1430.0000</vUnCom><vProd>7150.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>5.0000</qTrib><vUnTrib>1430.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>7150.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>7150.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"14\"><prod><cProd>120180608</cProd><cEAN/><xProd>80608 JKT DE COURO</xProd><NCM>62043100</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>3.0000</qCom><vUnCom>2510.0000</vUnCom><vProd>7530.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>3.0000</qTrib><vUnTrib>2510.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>7530.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>7530.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"15\"><prod><cProd>120181605</cProd><cEAN/><xProd>81605 BLAZER ESTAMP.</xProd><NCM>62043200</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>2.0000</qCom><vUnCom>935.0000</vUnCom><vProd>1870.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>2.0000</qTrib><vUnTrib>935.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>1870.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>1870.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><det nItem=\"16\"><prod><cProd>1201TOPDE</cProd><cEAN/><xProd>TOPDEL TOP C.CHINE DELTA</xProd><NCM>62061000</NCM><CFOP>6152</CFOP><uCom>PC</uCom><qCom>1.0000</qCom><vUnCom>1331.0000</vUnCom><vProd>1331.00</vProd><cEANTrib/><uTrib>PC</uTrib><qTrib>1.0000</qTrib><vUnTrib>1331.0000</vUnTrib><indTot>1</indTot></prod><imposto><ICMS><ICMS00><orig>0</orig><CST>00</CST><modBC>3</modBC><vBC>0.00</vBC><pICMS>0.00</pICMS><vICMS>0.00</vICMS></ICMS00></ICMS><IPI><cEnq>999</cEnq><IPINT><CST>51</CST></IPINT></IPI><PIS><PISOutr><CST>49</CST><vBC>1331.00</vBC><pPIS>0.00</pPIS><vPIS>0.00</vPIS></PISOutr></PIS><COFINS><COFINSOutr><CST>49</CST><vBC>1331.00</vBC><pCOFINS>0.00</pCOFINS><vCOFINS>0.00</vCOFINS></COFINSOutr></COFINS></imposto></det><total><ICMSTot><vBC>0.00</vBC><vICMS>0.00</vICMS><vICMSDeson>0.00</vICMSDeson><vBCST>0.00</vBCST><vST>0.00</vST><vProd>0.00</vProd><vFrete>0.00</vFrete><vSeg>0.00</vSeg><vDesc>53773.20</vDesc><vII>0.00</vII><vIPI>2138.12</vIPI><vPIS>0.00</vPIS><vCOFINS>0.00</vCOFINS><vOutro>0.00</vOutro><vNF>53773.20</vNF></ICMSTot></total><transp><modFrete>1</modFrete><transporta><CNPJ>06819428000147</CNPJ><xNome>Seamless Transportes E Turismo</xNome><IE>689045040877</IE><xEnder>RUA PROFESSOR JOSE BENEDITO DE CAMARGO 000094</xEnder><xMun>FRANCA</xMun><UF>SP</UF></transporta><vol><qVol>45</qVol><esp>caixa(s)</esp><marca>SAAD</marca><nVol>1</nVol><pesoL>0.000</pesoL><pesoB>0.000</pesoB></vol></transp><cobr><fat><nFat>114</nFat><vOrig>53773.20</vOrig></fat></cobr></infNFe><Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"><SignedInfo><CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/><SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/><Reference URI=\"#NFe35110883932854000133550010000001141840787155\"><Transforms><Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/><Transform Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/></Transforms><DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/><DigestValue>712df2234b0409ec4875473492266cd8dfd488fc</DigestValue></Reference></SignedInfo><SignatureValue>S1kwjegjQr61JPkMwl71PBvPkbGmP/Hysy9BnBYCijMQ1eS+myhk2HSXQHbqsgzYsKD1J/69sYgVc/8HjBODsRgylZVGNytTyw+vMKBkDEUBOK6f7m3o3eBZE3aaiYouTW55IZnjOoDgqO4yh8EIgJFw0jmc7LIa1RYEfwgVIZJjMB3qULd0KPhj/IGYlg1ha0cSFZSMjAqmvz4ypcfDC/bp9P9efF0XFB+BLe6kMYJoNUk5L4oIA9YnVvtEoZNGacyT6/gdCilF6Bu1npO5Rj/sH58uUHusO4ehm98zO25YGz+UiWQRWKbjugDaBjYsId7Ejc+cqlVV0zQ6sijgUg==</SignatureValue><KeyInfo><X509Data><X509Certificate>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</X509Certificate></X509Data></KeyInfo></Signature></NFe>";
        NFe nfe = XmlConverterHelper.xmlToNfe(xmlNfe);
        Assert.assertEquals(Double.valueOf(53773.2), nfe.getInfNFe().getTotal().getICMSTot().getvNf());
    }
}
